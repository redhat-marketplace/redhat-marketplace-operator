apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |-
      [
        {
          "apiVersion": "marketplace.redhat.com/v1alpha1",
          "kind": "MarketplaceConfig",
          "metadata": {
            "labels": {
              "redhat.marketplace.com/name": "redhat-marketplace-operator"
            },
            "name": "redhat-marketplace-rhm-marketplaceconfig",
            "namespace": "openshift-redhat-marketplace"
          },
          "spec": {
            "clusterUUID": "example-clusterUUID",
            "deploySecretName": "rhm-operator-secret",
            "installIBMCatalogSource": false,
            "rhmAccountID": "example-userid"
          }
        },
        {
          "apiVersion": "marketplace.redhat.com/v1alpha1",
          "kind": "MeterBase",
          "metadata": {
            "labels": {
              "redhat.marketplace.com/name": "redhat-marketplace-operator"
            },
            "name": "redhat-marketplace-meterbase",
            "namespace": "openshift-redhat-marketplace"
          },
          "spec": {
            "enabled": true,
            "prometheus": {
              "resources": {
                "limits": {
                  "cpu": "2",
                  "memory": "2Gi"
                },
                "requests": {
                  "cpu": "1",
                  "memory": "1G"
                }
              },
              "storage": {
                "size": "20Gi"
              }
            }
          }
        },
        {
          "apiVersion": "marketplace.redhat.com/v1alpha1",
          "kind": "MeterReport",
          "metadata": {
            "labels": {
              "redhat.marketplace.com/name": "redhat-marketplace-operator"
            },
            "name": "redhat-marketplace-example-meterreport",
            "namespace": "openshift-redhat-marketplace"
          },
          "spec": {
            "endTime": "2020-08-05T00:00:00Z",
            "prometheusService": {
              "name": "rhm-prometheus-meterbase",
              "namespace": "openshift-redhat-marketplace",
              "targetPort": "rbac"
            },
            "startTime": "2020-08-04T00:00:00Z"
          }
        },
        {
          "apiVersion": "marketplace.redhat.com/v1alpha1",
          "kind": "RazeeDeployment",
          "metadata": {
            "labels": {
              "redhat.marketplace.com/name": "redhat-marketplace-operator"
            },
            "name": "redhat-marketplace-razeedeployment-example",
            "namespace": "openshift-redhat-marketplace"
          },
          "spec": {
            "clusterUUID": "example-cluster-uuid",
            "enabled": true
          }
        },
        {
          "apiVersion": "marketplace.redhat.com/v1alpha1",
          "kind": "RemoteResourceS3",
          "metadata": {
            "labels": {
              "redhat.marketplace.com/name": "redhat-marketplace-operator"
            },
            "name": "redhat-marketplace-example-remoteresources3",
            "namespace": "openshift-redhat-marketplace"
          },
          "spec": {
            "auth": {
              "iam": {
                "apiKeyRef": {
                  "valueFrom": {
                    "secretKeyRef": {
                      "key": "accesskey",
                      "name": "rhm-cos-reader-key"
                    }
                  }
                },
                "grantType": "urn:ibm:params:oauth:grant-type:apikey",
                "responseType": "cloud_iam",
                "url": "https://iam.cloud.ibm.com/identity/token"
              }
            },
            "requests": [
              {
                "options": {
                  "url": "https://s3.us-east.cloud-object-storage.appdomain.cloud/your-accountId/your-cluster-uuid/name-of-child.yaml"
                }
              }
            ]
          }
        },
        {
          "apiVersion": "marketplace.redhat.com/v1beta1",
          "kind": "MeterDefinition",
          "metadata": {
            "labels": {
              "redhat.marketplace.com/name": "redhat-marketplace-operator"
            },
            "name": "redhat-marketplace-example-meterdefinition-4",
            "namespace": "openshift-redhat-marketplace"
          },
          "spec": {
            "group": "partner.metering.com",
            "kind": "App",
            "meters": [
              {
                "aggregation": "sum",
                "metricId": "container_cpu_usage_core_avg",
                "period": "1h",
                "query": "rate(container_cpu_usage_seconds_total{cpu=\"total\",container=\"db\"}[5m])*100",
                "workloadType": "Pod"
              }
            ],
            "resourceFilters": [
              {
                "namespace": {
                  "useOperatorGroup": true
                },
                "ownerCRD": {
                  "apiVersion": "marketplace.redhat.com/v1alpha1",
                  "kind": "RazeeDeployment"
                },
                "workloadType": "Pod"
              }
            ]
          }
        },
        {
          "apiVersion": "marketplace.redhat.com/v1beta1",
          "kind": "MeterDefinition",
          "metadata": {
            "labels": {
              "redhat.marketplace.com/name": "redhat-marketplace-operator"
            },
            "name": "redhat-marketplace-meterdefinition-sample",
            "namespace": "openshift-redhat-marketplace"
          },
          "spec": {
            "group": "partner.metering.com",
            "kind": "App",
            "meters": [
              {
                "aggregation": "sum",
                "metricId": "container_cpu_usage_core_avg",
                "period": "1h",
                "query": "rate(container_cpu_usage_seconds_total{cpu=\"total\",container=\"db\"}[5m])*100",
                "workloadType": "Pod"
              }
            ],
            "resourceFilters": [
              {
                "namespace": {
                  "useOperatorGroup": true
                },
                "ownerCRD": {
                  "apiVersion": "marketplace.redhat.com/v1alpha1",
                  "kind": "RazeeDeployment"
                },
                "workloadType": "Pod"
              }
            ]
          }
        }
      ]
    capabilities: Seamless Upgrades
    operators.operatorframework.io/builder: operator-sdk-v1.8.0+git
    operators.operatorframework.io/project_layout: go.kubebuilder.io/v3
    containerImage: quay.io/rh-marketplace/redhat-marketplace-operator:2.3.0-315
    createdAt: "2021-07-16T11:57:08Z"
    olm.skipRange: '>=1.0.0 <2.3.0'
  name: redhat-marketplace-operator.v2.3.0
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
      - description: 'MarketplaceConfig is the configuration manager for our Red Hat Marketplace
        controllers. By installing this product you accept the license terms https://ibm.biz/BdfaAY.'
        kind: MarketplaceConfig
        name: marketplaceconfigs.marketplace.redhat.com
        version: v1alpha1
      - kind: MeterBase
        name: meterbases.marketplace.redhat.com
        version: v1alpha1
      - kind: MeterDefinition
        name: meterdefinitions.marketplace.redhat.com
        version: v1alpha1
      - kind: MeterDefinition
        name: meterdefinitions.marketplace.redhat.com
        version: v1beta1
      - kind: MeterReport
        name: meterreports.marketplace.redhat.com
        version: v1alpha1
      - kind: RazeeDeployment
        name: razeedeployments.marketplace.redhat.com
        version: v1alpha1
      - kind: RemoteResourceS3
        name: remoteresources3s.marketplace.redhat.com
        version: v1alpha1
  description: |
    The Red Hat Marketplace Operator provides cluster management, metering and
    operator installation for Red Hat Marketplace customers.
    ### **Important Note**
    A set of instructions for onboarding is provided here. For more detailed onboarding instructions or information about what is installed please visit [marketplace.redhat.com](https://marketplace.redhat.com).
    To access images from Red Hat Marketplace and the Marketplace container catalog you will need to make the pull secret attained in installation available to the workloads running on the cluster.
    ### Installation
    1. Create or get your pull secret from [Red Hat Marketplace](https://marketplace.redhat.com/en-us/documentation/clusters#get-pull-secret).
    2. Install the Red Hat Marketplace Operator in the openshift-redhat-marketplace namespace.
    3. Create a Kubernetes secret in the openshift-redhat-marketplace namespace with the name `redhat-marketplace-pull-secret` and key `PULL_SECRET` with the value of the Red hat Marketplace Pull Secret.

       ```sh
       # Replace ${PULL_SECRET} with your secret from Red Hat Marketplace
       oc create secret generic redhat-marketplace-pull-secret -n  openshift-redhat-marketplace --from-literal=PULL_SECRET=${PULL_SECRET}
       ```

    4. Install the Red Hat Marketplace pull secret as a global pull secret on the cluster.
       **Warning:** This step will make your cluster perform a rolling restart.
       These steps require `oc`, `jq`, and `base64` to be available on your machine.

       ```sh
       # Create the docker pull secret file using your PULL_SECRET from Red Hat Marketplace.
       # Store it in a file called entitledregistryconfigjson.
       oc create secret docker-registry entitled-registry --docker-server=registry.marketplace.redhat.com --docker-username "cp" --docker-password "${PULL_SECRET}" --dry-run=true --output="jsonpath={.data.\.dockerconfigjson}" | base64 --decode > entitledregistryconfigjson
       # Get the current global secrets on the cluster and store it as a file named dockerconfigjson
       oc get secret pull-secret -n openshift-config --output="jsonpath={.data.\.dockerconfigjson}" | base64 --decode > dockerconfigjson
       # Merge the two dockerconfigs together into a file called dockerconfigjson-merged.
       jq -s '.[0] * .[1]' dockerconfigjson entitledregistryconfigjson > dockerconfigjson-merged
       # Set the cluster's dockerconfig file to the new merged version.
       oc set data secret/pull-secret -n openshift-config --from-file=.dockerconfigjson=dockerconfigjson-merged
       # Cluster will now restart.
       ```

    ### Why is a global pull secret required?
    In order to successfully install the Red Hat Marketplace products, you will need to make the pull secret available across the cluster. This can be achieved by applying the Red Hat Marketplace Pull Secret as a [global pull secret](https://docs.openshift.com/container-platform/4.6/openshift_images/managing_images/using-image-pull-secrets.html#images-update-global-pull-secret_using-image-pull-secrets).
    For alternative approachs, please see the official OpenShift [documentation](https://docs.openshift.com/container-platform/4.6/openshift_images/managing_images/using-image-pull-secrets.html).
    ### Documentation
    You can find our documentation [here.](https://marketplace.redhat.com/en-us/documentation/)
    ### Getting help
    If you encounter any issues while using Red Hat Marketplace operator, you
    can create an issue on our [Github
    repo](https://github.com/redhat-marketplace/redhat-marketplace-operator) for
    bugs, enhancements, or other requests. You can also visit our main page and
    review our [support](https://marketplace.redhat.com/en-us/support) and [documentation](https://marketplace.redhat.com/en-us/documentation/).
    ### Readme
    You can find our readme [here.](https://github.com/redhat-marketplace/redhat-marketplace-operator/blob/develop/README.md)
    ### License information
    You can find our license information [here.](https://github.com/redhat-marketplace/redhat-marketplace-operator/blob/develop/LICENSE)
  displayName: Redhat Marketplace Operator
  icon:
  - base64data: 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
    mediatype: image/png
  install:
    spec:
      clusterPermissions:
        - rules:
            - nonResourceURLs:
                - /api/v1/query
                - /api/v1/query_range
              verbs:
                - create
                - get
            - apiGroups:
                - ""
              resources:
                - configmaps
                - namespaces
                - secrets
                - services
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - configmaps
                - pods
                - secrets
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - namespaces
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - ""
              resources:
                - nodes
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - ""
              resources:
                - persistentvolumeclaims
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - pods
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - secret
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resourceNames:
                - razeedeploy-sa
                - watch-keeper-sa
              resources:
                - serviceaccounts
              verbs:
                - delete
            - apiGroups:
                - apiextensions.k8s.io
              resources:
                - customresourcedefinitions
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - apiextensions.k8s.io
              resourceNames:
                - meterdefinitions.marketplace.redhat.com
              resources:
                - customresourcedefinitions
              verbs:
                - patch
                - update
            - apiGroups:
                - apps
              resources:
                - deployments
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - apps
              resourceNames:
                - clustersubscription
                - featureflagsetld-controller
                - managedset-controller
                - mustachetemplate-controller
                - remoteresource-controller
                - remoteresources3-controller
                - remoteresources3decrypt-controller
                - watch-keeper
              resources:
                - deployments
              verbs:
                - delete
            - apiGroups:
                - apps
              resources:
                - statefulsets
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - batch
                - extensions
              resources:
                - jobs
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - batch
                - extensions
              resourceNames:
                - razeedeploy-job
              resources:
                - jobs
              verbs:
                - delete
            - apiGroups:
                - config.openshift.io
              resources:
                - clusterversions
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - config.openshift.io
              resources:
                - clusterversions
                - consoles
                - infrastructures
              verbs:
                - get
                - patch
                - update
            - apiGroups:
                - deploy.razee.io
              resources:
                - '*'
              verbs:
                - delete
                - get
                - list
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - marketplaceconfigs
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - marketplaceconfigs
                - marketplaceconfigs/finalizers
                - marketplaceconfigs/status
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterbases
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterbases
                - meterbases/finalizers
                - meterbases/status
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterdefinitions
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterdefinitions
                - meterdefinitions/status
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterdefinitions/status
              verbs:
                - get
                - list
                - patch
                - update
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterreports
              verbs:
                - get
                - list
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterreports
                - meterreports/finalizers
                - meterreports/status
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - razeedeployments
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - remoteresources3s
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - monitoring.coreos.com
              resources:
                - prometheuses
                - servicemonitors
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - operators.coreos.com
              resources:
                - catalogsources
              verbs:
                - create
                - delete
            - apiGroups:
                - operators.coreos.com
              resources:
                - catalogsources
                - operatorsources
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - operators.coreos.com
              resources:
                - clusterserviceversions
              verbs:
                - create
                - delete
                - patch
                - update
            - apiGroups:
                - operators.coreos.com
              resources:
                - clusterserviceversions
                - subscriptions
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - operators.coreos.com
              resources:
                - operatorgroups
              verbs:
                - create
                - delete
                - get
                - list
                - update
                - watch
            - apiGroups:
                - operators.coreos.com
              resources:
                - operatorsources
              verbs:
                - create
            - apiGroups:
                - operators.coreos.com
              resources:
                - subscriptions
              verbs:
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - rbac.authorization.k8s.io
              resourceNames:
                - razeedeploy-admin-cr
                - redhat-marketplace-razeedeploy
              resources:
                - clusterroles
              verbs:
                - delete
            - apiGroups:
                - storage.k8s.io
              resources:
                - storageclasses
              verbs:
                - get
                - list
                - watch
          serviceAccountName: redhat-marketplace-operator
      deployments:
        - name: redhat-marketplace-controller-manager
          spec:
            replicas: 1
            selector:
              matchLabels:
                redhat.marketplace.com/name: redhat-marketplace-operator
            strategy: {}
            template:
              metadata:
                annotations:
                  productID: 36cdaba810c348c096b85800dd62bcf1
                  productMetric: FREE
                  productName: Red Hat Marketplace Operator
                labels:
                  control-plane: controller-manager
                  redhat.marketplace.com/name: redhat-marketplace-operator
              spec:
                affinity:
                  nodeAffinity:
                    requiredDuringSchedulingIgnoredDuringExecution:
                      nodeSelectorTerms:
                        - matchExpressions:
                            - key: kubernetes.io/arch
                              operator: In
                              values:
                                - amd64
                                - ppc64le
                                - s390x
                containers:
                  - args:
                      - --health-probe-bind-address=:8081
                      - --metrics-addr=127.0.0.1:8080
                      - --enable-leader-election
                    env:
                      - name: RELATED_IMAGE_RHM_RRS3_DEPLOYMENT
                        value: quay.io/razee/remoteresources3:0.9.3
                      - name: RELATED_IMAGE_RHM_WATCH_KEEPER_DEPLOYMENT
                        value: quay.io/razee/watch-keeper:0.7.7
                      - name: RELATED_IMAGE_PROMETHEUS
                        value: registry.redhat.io/openshift4/ose-prometheus:v4.6
                      - name: RELATED_IMAGE_OAUTH_PROXY
                        value: registry.redhat.io/openshift4/ose-oauth-proxy:v4.5
                      - name: RELATED_IMAGE_PROMETHEUS_OPERATOR
                        value: registry.redhat.io/openshift4/ose-prometheus-operator:v4.5
                      - name: RELATED_IMAGE_CONFIGMAP_RELOADER
                        value: registry.redhat.io/openshift4/ose-configmap-reloader:v4.5
                      - name: RELATED_IMAGE_PROMETHEUS_CONFIGMAP_RELOADER
                        value: registry.redhat.io/openshift4/ose-prometheus-config-reloader:v4.5
                      - name: RELATED_IMAGE_KUBE_RBAC_PROXY
                        value: registry.redhat.io/openshift4/ose-kube-rbac-proxy:v4.5
                      - name: IBMCATALOGSOURCE
                        value: "true"
                      - name: OS_IMAGE_KUBE_RBAC_PROXY
                        value: quay.io/coreos/kube-rbac-proxy:v0.5.0
                      - name: OS_IMAGE_PROMETHEUS
                        value: quay.io/prometheus/prometheus:v2.24.0
                      - name: OS_IMAGE_PROMETHEUS_OPERATOR
                        value: quay.io/coreos/prometheus-operator:v0.42.1
                      - name: OS_IMAGE_CONFIGMAP_RELOADER
                        value: quay.io/coreos/configmap-reload:v0.0.1
                      - name: OS_IMAGE_PROMETHEUS_CONFIGMAP_RELOADER
                        value: quay.io/coreos/prometheus-config-reloader:v0.42.1
                      - name: OS_IMAGE_OAUTH_PROXY
                        value: quay.io/oauth2-proxy/oauth2-proxy:v6.1.1
                      - name: OPERATOR_NAME
                        value: redhat-marketplace-operator
                      - name: RELATED_IMAGE_REPORTER
                        value: quay.io/rh-marketplace/redhat-marketplace-reporter:2.3.0-315
                      - name: RELATED_IMAGE_METRIC_STATE
                        value: quay.io/rh-marketplace/redhat-marketplace-metric-state:2.3.0-315
                      - name: RELATED_IMAGE_AUTHCHECK
                        value: quay.io/rh-marketplace/redhat-marketplace-authcheck:2.3.0-315
                      - name: WATCH_NAMESPACE
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.annotations['olm.targetNamespaces']
                      - name: POD_NAMESPACE
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.namespace
                      - name: POD_NAME
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.name
                      - name: OLM_OWNER_NAME
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.labels['olm.owner']
                      - name: OLM_OWNER_NAMESPACE
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.labels['olm.owner.namespace']
                      - name: OLM_OWNER_KIND
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.labels['olm.owner.kind']
                      - name: OPERATOR_GROUP
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.annotations['olm.operatorGroup']
                    image: quay.io/rh-marketplace/redhat-marketplace-operator:2.3.0-315
                    livenessProbe:
                      httpGet:
                        path: /healthz
                        port: 8081
                      initialDelaySeconds: 15
                      periodSeconds: 20
                    name: manager
                    ports:
                      - containerPort: 9443
                        name: webhook-server
                        protocol: TCP
                    readinessProbe:
                      httpGet:
                        path: /readyz
                        port: 8081
                      initialDelaySeconds: 5
                      periodSeconds: 10
                    resources:
                      limits:
                        cpu: 400m
                        memory: 500Mi
                      requests:
                        cpu: 100m
                        memory: 100Mi
                    securityContext:
                      allowPrivilegeEscalation: false
                      capabilities:
                        drop:
                          - ALL
                      privileged: false
                      readOnlyRootFilesystem: true
                      runAsNonRoot: true
                    volumeMounts:
                      - mountPath: /tmp/k8s-webhook-server/serving-certs
                        name: cert
                        readOnly: true
                  - args:
                      - --secure-listen-address=0.0.0.0:8443
                      - --upstream=http://127.0.0.1:8081/
                      - --logtostderr=true
                      - --v=10
                    image: registry.redhat.io/openshift4/ose-kube-rbac-proxy:v4.5
                    name: mgr-kube-rbac-proxy
                    resources: {}
                serviceAccountName: redhat-marketplace-operator
                terminationGracePeriodSeconds: 10
                volumes:
                  - name: cert
                    secret:
                      defaultMode: 420
                      optional: true
                      secretName: redhat-marketplace-controller-manager-service
      permissions:
        - rules:
            - apiGroups:
                - ""
              resources:
                - configmaps
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - patch
                - delete
            - apiGroups:
                - ""
              resources:
                - configmaps/status
              verbs:
                - get
                - update
                - patch
            - apiGroups:
                - ""
              resources:
                - events
              verbs:
                - create
                - patch
            - apiGroups:
                - ""
              resources:
                - configmap
                - secret
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - configmaps
              verbs:
                - create
                - delete
                - get
                - patch
                - update
            - apiGroups:
                - ""
              resources:
                - persistentvolumeclaims
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - ""
              resources:
                - pods
              verbs:
                - delete
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - secret
              verbs:
                - create
            - apiGroups:
                - ""
              resourceNames:
                - redhat-marketplace-pull-secret
              resources:
                - secret
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - ""
              resources:
                - secrets
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - ""
              resources:
                - service
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - ""
              resources:
                - serviceaccounts/token
              verbs:
                - create
                - get
                - list
                - update
            - apiGroups:
                - ""
              resources:
                - services
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - apps
              resources:
                - deployments
              verbs:
                - create
                - delete
                - patch
                - update
            - apiGroups:
                - batch
                - extensions
              resources:
                - jobs
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - marketplaceconfigs
              verbs:
                - create
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - marketplaceconfigs
                - marketplaceconfigs/finalizers
                - marketplaceconfigs/status
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterbases
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterbases
                - meterbases/finalizers
                - meterbases/status
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterreports
              verbs:
                - create
                - delete
                - get
                - list
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - meterreports
                - meterreports/finalizers
                - meterreports/status
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - razeedeployments
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - razeedeployments
                - razeedeployments/finalizers
                - razeedeployments/status
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - remoteresources3s
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - marketplace.redhat.com
              resources:
                - remoteresources3s
                - remoteresources3s/status
              verbs:
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - monitoring.coreos.com
              resources:
                - prometheuses
                - servicemonitors
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - operators.coreos.com
              resources:
                - subscriptions
              verbs:
                - create
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resourceNames:
                - pull-secret
              resources:
                - secrets
              verbs:
                - get
                - watch
                - list
          serviceAccountName: redhat-marketplace-operator
    strategy: deployment
  installModes:
  - supported: true
    type: OwnNamespace
  - supported: true
    type: SingleNamespace
  - supported: true
    type: MultiNamespace
  - supported: false
    type: AllNamespaces
  keywords:
    - redhat-marketplace-operator
  links:
    - name: Redhat Marketplace Operator
      url: https://redhat-marketplace-operator.domain
    - name: About
      url: https://marketplace.redhat.com/en-us/about
    - name: Support
      url: https://marketplace.redhat.com/en-us/support
  maintainers:
    - email: rhmoper@us.ibm.com
      name: RHM Operator Team
  maturity: stable
  provider:
    name: Red Hat Marketplac
    url: https://marketplace.redhat.com
  version: 2.3.0
  webhookdefinitions:
    - admissionReviewVersions:
        - v1beta1
      containerPort: 9443
      deploymentName: redhat-marketplace-controller-manager
      failurePolicy: Fail
      generateName: vmeterdefinition.marketplace.redhat.com
      rules:
        - apiGroups:
            - marketplace.redhat.com
          apiVersions:
            - v1beta1
          operations:
            - CREATE
            - UPDATE
          resources:
            - meterdefinitions
      sideEffects: None
      targetPort: 9443
      type: ValidatingAdmissionWebhook
      webhookPath: /validate-marketplace-redhat-com-v1beta1-meterdefinition
    - admissionReviewVersions:
        - v1beta1
      containerPort: 9443
      deploymentName: redhat-marketplace-controller-manager
      failurePolicy: Fail
      generateName: mmeterdefinition.marketplace.redhat.com
      rules:
        - apiGroups:
            - marketplace.redhat.com
          apiVersions:
            - v1beta1
          operations:
            - CREATE
            - UPDATE
          resources:
            - meterdefinitions
      sideEffects: None
      targetPort: 9443
      type: MutatingAdmissionWebhook
      webhookPath: /mutate-marketplace-redhat-com-v1beta1-meterdefinition
    - admissionReviewVersions: 
        - v1beta1
      conversionCRDs:
        - meterdefinitions.marketplace.redhat.com
      deploymentName: redhat-marketplace-controller-manager
      generateName: cmeterdefinitions.kb.io
      sideEffects: None
      type: ConversionWebhook
      webhookPath: /convert
      targetPort: 9443
      containerPort: 9443
  relatedImages:
    - image: quay.io/rh-marketplace/redhat-marketplace-metric-state:2.3.0-315
      name: RELATED_IMAGE_METRIC_STATE
    - image: quay.io/rh-marketplace/redhat-marketplace-reporter:2.3.0-315
      name: RELATED_IMAGE_REPORTER
    - image: quay.io/rh-marketplace/redhat-marketplace-authcheck:2.3.0-315
      name: RELATED_IMAGE_AUTHCHECK
    - image: quay.io/razee/remoteresources3:0.9.3
      name: RELATED_IMAGE_RHM_RRS3_DEPLOYMENT
    - image: quay.io/razee/watch-keeper:0.7.7
      name: RELATED_IMAGE_RHM_WATCH_KEEPER_DEPLOYMENT
    - image: registry.redhat.io/openshift4/ose-prometheus:v4.6
      name: RELATED_IMAGE_PROMETHEUS
    - image: registry.redhat.io/openshift4/ose-oauth-proxy:v4.5
      name: RELATED_IMAGE_OAUTH_PROXY
    - image: registry.redhat.io/openshift4/ose-prometheus-operator:v4.5
      name: RELATED_IMAGE_PROMETHEUS_OPERATOR
    - image: registry.redhat.io/openshift4/ose-configmap-reloader:v4.5
      name: RELATED_IMAGE_CONFIGMAP_RELOADER
    - image: registry.redhat.io/openshift4/ose-prometheus-config-reloader:v4.5
      name: RELATED_IMAGE_PROMETHEUS_CONFIGMAP_RELOADER
    - image: registry.redhat.io/openshift4/ose-kube-rbac-proxy:v4.5
      name: RELATED_IMAGE_KUBE_RBAC_PROXY
